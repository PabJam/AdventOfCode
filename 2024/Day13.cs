using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;
using Utils;

namespace _2024
{
    public static class Day13
    {
        public const string test_input_1 = "Button A: X+94, Y+34\r\nButton B: X+22, Y+67\r\nPrize: X=8400, Y=5400\r\n\r\nButton A: X+26, Y+66\r\nButton B: X+67, Y+21\r\nPrize: X=12748, Y=12176\r\n\r\nButton A: X+17, Y+86\r\nButton B: X+84, Y+37\r\nPrize: X=7870, Y=6450\r\n\r\nButton A: X+69, Y+23\r\nButton B: X+27, Y+71\r\nPrize: X=18641, Y=10279";
        public const string input_1 = "Button A: X+75, Y+30\r\nButton B: X+57, Y+75\r\nPrize: X=9885, Y=8130\r\n\r\nButton A: X+48, Y+12\r\nButton B: X+20, Y+52\r\nPrize: X=1320, Y=5260\r\n\r\nButton A: X+20, Y+86\r\nButton B: X+46, Y+33\r\nPrize: X=370, Y=767\r\n\r\nButton A: X+21, Y+77\r\nButton B: X+65, Y+36\r\nPrize: X=4616, Y=8832\r\n\r\nButton A: X+49, Y+88\r\nButton B: X+90, Y+36\r\nPrize: X=3292, Y=5284\r\n\r\nButton A: X+46, Y+13\r\nButton B: X+11, Y+71\r\nPrize: X=6610, Y=7336\r\n\r\nButton A: X+55, Y+23\r\nButton B: X+25, Y+47\r\nPrize: X=8960, Y=6506\r\n\r\nButton A: X+19, Y+90\r\nButton B: X+91, Y+28\r\nPrize: X=1245, Y=3076\r\n\r\nButton A: X+77, Y+15\r\nButton B: X+55, Y+57\r\nPrize: X=7535, Y=2301\r\n\r\nButton A: X+29, Y+59\r\nButton B: X+39, Y+11\r\nPrize: X=15636, Y=3044\r\n\r\nButton A: X+17, Y+94\r\nButton B: X+68, Y+34\r\nPrize: X=4607, Y=4612\r\n\r\nButton A: X+56, Y+17\r\nButton B: X+11, Y+52\r\nPrize: X=9639, Y=2048\r\n\r\nButton A: X+63, Y+49\r\nButton B: X+14, Y+94\r\nPrize: X=3703, Y=9529\r\n\r\nButton A: X+54, Y+28\r\nButton B: X+22, Y+48\r\nPrize: X=11978, Y=11172\r\n\r\nButton A: X+46, Y+11\r\nButton B: X+36, Y+61\r\nPrize: X=2678, Y=17058\r\n\r\nButton A: X+66, Y+34\r\nButton B: X+14, Y+36\r\nPrize: X=15424, Y=3726\r\n\r\nButton A: X+17, Y+72\r\nButton B: X+84, Y+66\r\nPrize: X=6233, Y=9882\r\n\r\nButton A: X+17, Y+98\r\nButton B: X+86, Y+40\r\nPrize: X=5832, Y=9920\r\n\r\nButton A: X+23, Y+48\r\nButton B: X+30, Y+13\r\nPrize: X=16304, Y=10705\r\n\r\nButton A: X+49, Y+31\r\nButton B: X+25, Y+86\r\nPrize: X=3496, Y=8037\r\n\r\nButton A: X+81, Y+24\r\nButton B: X+34, Y+89\r\nPrize: X=4240, Y=5834\r\n\r\nButton A: X+35, Y+53\r\nButton B: X+70, Y+15\r\nPrize: X=4305, Y=1605\r\n\r\nButton A: X+69, Y+19\r\nButton B: X+22, Y+60\r\nPrize: X=8042, Y=6368\r\n\r\nButton A: X+22, Y+25\r\nButton B: X+44, Y+14\r\nPrize: X=3916, Y=2506\r\n\r\nButton A: X+39, Y+53\r\nButton B: X+96, Y+11\r\nPrize: X=9240, Y=4553\r\n\r\nButton A: X+70, Y+55\r\nButton B: X+18, Y+86\r\nPrize: X=5672, Y=7259\r\n\r\nButton A: X+62, Y+27\r\nButton B: X+21, Y+54\r\nPrize: X=1842, Y=13220\r\n\r\nButton A: X+17, Y+53\r\nButton B: X+46, Y+19\r\nPrize: X=7487, Y=19043\r\n\r\nButton A: X+67, Y+25\r\nButton B: X+24, Y+63\r\nPrize: X=5154, Y=7272\r\n\r\nButton A: X+59, Y+20\r\nButton B: X+12, Y+37\r\nPrize: X=17990, Y=1825\r\n\r\nButton A: X+70, Y+24\r\nButton B: X+17, Y+58\r\nPrize: X=8465, Y=4706\r\n\r\nButton A: X+16, Y+56\r\nButton B: X+56, Y+15\r\nPrize: X=10488, Y=19753\r\n\r\nButton A: X+27, Y+16\r\nButton B: X+25, Y+47\r\nPrize: X=2997, Y=11753\r\n\r\nButton A: X+66, Y+29\r\nButton B: X+26, Y+72\r\nPrize: X=2270, Y=5056\r\n\r\nButton A: X+86, Y+62\r\nButton B: X+18, Y+89\r\nPrize: X=7356, Y=8040\r\n\r\nButton A: X+95, Y+41\r\nButton B: X+51, Y+87\r\nPrize: X=2737, Y=2611\r\n\r\nButton A: X+11, Y+52\r\nButton B: X+63, Y+15\r\nPrize: X=13818, Y=8890\r\n\r\nButton A: X+24, Y+62\r\nButton B: X+58, Y+17\r\nPrize: X=4918, Y=16511\r\n\r\nButton A: X+11, Y+47\r\nButton B: X+63, Y+18\r\nPrize: X=6709, Y=14881\r\n\r\nButton A: X+48, Y+39\r\nButton B: X+17, Y+76\r\nPrize: X=4539, Y=8352\r\n\r\nButton A: X+22, Y+49\r\nButton B: X+66, Y+17\r\nPrize: X=7260, Y=3430\r\n\r\nButton A: X+80, Y+32\r\nButton B: X+11, Y+61\r\nPrize: X=10025, Y=7247\r\n\r\nButton A: X+57, Y+29\r\nButton B: X+23, Y+48\r\nPrize: X=5957, Y=9914\r\n\r\nButton A: X+38, Y+16\r\nButton B: X+50, Y+99\r\nPrize: X=5284, Y=9396\r\n\r\nButton A: X+34, Y+17\r\nButton B: X+15, Y+38\r\nPrize: X=16255, Y=17811\r\n\r\nButton A: X+47, Y+11\r\nButton B: X+29, Y+63\r\nPrize: X=6648, Y=3342\r\n\r\nButton A: X+68, Y+37\r\nButton B: X+25, Y+99\r\nPrize: X=3930, Y=7433\r\n\r\nButton A: X+92, Y+30\r\nButton B: X+21, Y+97\r\nPrize: X=3872, Y=9196\r\n\r\nButton A: X+26, Y+82\r\nButton B: X+59, Y+11\r\nPrize: X=3307, Y=4683\r\n\r\nButton A: X+62, Y+21\r\nButton B: X+28, Y+67\r\nPrize: X=13320, Y=17068\r\n\r\nButton A: X+77, Y+47\r\nButton B: X+11, Y+45\r\nPrize: X=5391, Y=5509\r\n\r\nButton A: X+16, Y+48\r\nButton B: X+71, Y+29\r\nPrize: X=5100, Y=17124\r\n\r\nButton A: X+15, Y+56\r\nButton B: X+79, Y+34\r\nPrize: X=2175, Y=16304\r\n\r\nButton A: X+45, Y+13\r\nButton B: X+84, Y+93\r\nPrize: X=10653, Y=9401\r\n\r\nButton A: X+54, Y+30\r\nButton B: X+32, Y+60\r\nPrize: X=6564, Y=9020\r\n\r\nButton A: X+42, Y+32\r\nButton B: X+12, Y+30\r\nPrize: X=3156, Y=2488\r\n\r\nButton A: X+44, Y+16\r\nButton B: X+23, Y+55\r\nPrize: X=6028, Y=6296\r\n\r\nButton A: X+68, Y+19\r\nButton B: X+30, Y+80\r\nPrize: X=17552, Y=1101\r\n\r\nButton A: X+19, Y+77\r\nButton B: X+51, Y+12\r\nPrize: X=10654, Y=3135\r\n\r\nButton A: X+99, Y+14\r\nButton B: X+37, Y+88\r\nPrize: X=3609, Y=3490\r\n\r\nButton A: X+33, Y+13\r\nButton B: X+18, Y+61\r\nPrize: X=1742, Y=12692\r\n\r\nButton A: X+81, Y+17\r\nButton B: X+64, Y+60\r\nPrize: X=3492, Y=1152\r\n\r\nButton A: X+51, Y+16\r\nButton B: X+19, Y+73\r\nPrize: X=16809, Y=11712\r\n\r\nButton A: X+74, Y+23\r\nButton B: X+12, Y+48\r\nPrize: X=12182, Y=10265\r\n\r\nButton A: X+63, Y+15\r\nButton B: X+28, Y+81\r\nPrize: X=10903, Y=6794\r\n\r\nButton A: X+14, Y+72\r\nButton B: X+70, Y+16\r\nPrize: X=11190, Y=10664\r\n\r\nButton A: X+37, Y+11\r\nButton B: X+27, Y+67\r\nPrize: X=3354, Y=8452\r\n\r\nButton A: X+33, Y+41\r\nButton B: X+77, Y+17\r\nPrize: X=5566, Y=2038\r\n\r\nButton A: X+50, Y+12\r\nButton B: X+17, Y+50\r\nPrize: X=10907, Y=18238\r\n\r\nButton A: X+55, Y+15\r\nButton B: X+15, Y+70\r\nPrize: X=7555, Y=15690\r\n\r\nButton A: X+46, Y+24\r\nButton B: X+33, Y+61\r\nPrize: X=11745, Y=2657\r\n\r\nButton A: X+58, Y+43\r\nButton B: X+28, Y+99\r\nPrize: X=4076, Y=6308\r\n\r\nButton A: X+54, Y+99\r\nButton B: X+74, Y+36\r\nPrize: X=4050, Y=4734\r\n\r\nButton A: X+34, Y+18\r\nButton B: X+20, Y+55\r\nPrize: X=10578, Y=15741\r\n\r\nButton A: X+69, Y+18\r\nButton B: X+52, Y+62\r\nPrize: X=8509, Y=6482\r\n\r\nButton A: X+13, Y+73\r\nButton B: X+96, Y+56\r\nPrize: X=3216, Y=5016\r\n\r\nButton A: X+11, Y+27\r\nButton B: X+77, Y+50\r\nPrize: X=13190, Y=1791\r\n\r\nButton A: X+35, Y+70\r\nButton B: X+54, Y+15\r\nPrize: X=2511, Y=2325\r\n\r\nButton A: X+52, Y+21\r\nButton B: X+34, Y+51\r\nPrize: X=3456, Y=2961\r\n\r\nButton A: X+16, Y+81\r\nButton B: X+90, Y+79\r\nPrize: X=1376, Y=3953\r\n\r\nButton A: X+34, Y+13\r\nButton B: X+36, Y+55\r\nPrize: X=13586, Y=3897\r\n\r\nButton A: X+27, Y+59\r\nButton B: X+53, Y+25\r\nPrize: X=5121, Y=1273\r\n\r\nButton A: X+63, Y+15\r\nButton B: X+30, Y+73\r\nPrize: X=13970, Y=10239\r\n\r\nButton A: X+86, Y+51\r\nButton B: X+46, Y+97\r\nPrize: X=1454, Y=2675\r\n\r\nButton A: X+25, Y+93\r\nButton B: X+59, Y+11\r\nPrize: X=5324, Y=7088\r\n\r\nButton A: X+43, Y+19\r\nButton B: X+29, Y+47\r\nPrize: X=19347, Y=5901\r\n\r\nButton A: X+24, Y+68\r\nButton B: X+52, Y+12\r\nPrize: X=6632, Y=6552\r\n\r\nButton A: X+39, Y+11\r\nButton B: X+12, Y+72\r\nPrize: X=18431, Y=819\r\n\r\nButton A: X+14, Y+35\r\nButton B: X+61, Y+43\r\nPrize: X=3166, Y=1111\r\n\r\nButton A: X+76, Y+48\r\nButton B: X+29, Y+72\r\nPrize: X=7155, Y=4680\r\n\r\nButton A: X+24, Y+50\r\nButton B: X+46, Y+19\r\nPrize: X=16134, Y=3617\r\n\r\nButton A: X+48, Y+72\r\nButton B: X+66, Y+11\r\nPrize: X=9204, Y=7294\r\n\r\nButton A: X+66, Y+62\r\nButton B: X+22, Y+77\r\nPrize: X=3520, Y=7419\r\n\r\nButton A: X+14, Y+47\r\nButton B: X+68, Y+39\r\nPrize: X=4250, Y=9875\r\n\r\nButton A: X+67, Y+14\r\nButton B: X+58, Y+59\r\nPrize: X=6096, Y=1977\r\n\r\nButton A: X+41, Y+21\r\nButton B: X+19, Y+38\r\nPrize: X=5924, Y=5047\r\n\r\nButton A: X+20, Y+83\r\nButton B: X+43, Y+35\r\nPrize: X=4668, Y=8470\r\n\r\nButton A: X+37, Y+95\r\nButton B: X+72, Y+46\r\nPrize: X=4106, Y=7904\r\n\r\nButton A: X+34, Y+11\r\nButton B: X+18, Y+40\r\nPrize: X=13094, Y=14354\r\n\r\nButton A: X+51, Y+85\r\nButton B: X+70, Y+16\r\nPrize: X=3158, Y=2042\r\n\r\nButton A: X+96, Y+13\r\nButton B: X+28, Y+22\r\nPrize: X=4812, Y=1471\r\n\r\nButton A: X+54, Y+22\r\nButton B: X+47, Y+67\r\nPrize: X=5636, Y=3636\r\n\r\nButton A: X+26, Y+51\r\nButton B: X+23, Y+13\r\nPrize: X=18952, Y=12022\r\n\r\nButton A: X+35, Y+55\r\nButton B: X+46, Y+17\r\nPrize: X=660, Y=10525\r\n\r\nButton A: X+33, Y+67\r\nButton B: X+48, Y+18\r\nPrize: X=10958, Y=9870\r\n\r\nButton A: X+11, Y+43\r\nButton B: X+70, Y+32\r\nPrize: X=11658, Y=1306\r\n\r\nButton A: X+25, Y+11\r\nButton B: X+27, Y+42\r\nPrize: X=2311, Y=2312\r\n\r\nButton A: X+74, Y+12\r\nButton B: X+11, Y+39\r\nPrize: X=4519, Y=6941\r\n\r\nButton A: X+63, Y+13\r\nButton B: X+15, Y+67\r\nPrize: X=2054, Y=5500\r\n\r\nButton A: X+64, Y+25\r\nButton B: X+16, Y+65\r\nPrize: X=7152, Y=12645\r\n\r\nButton A: X+44, Y+78\r\nButton B: X+51, Y+19\r\nPrize: X=15398, Y=6504\r\n\r\nButton A: X+17, Y+91\r\nButton B: X+62, Y+41\r\nPrize: X=5992, Y=9386\r\n\r\nButton A: X+33, Y+13\r\nButton B: X+11, Y+43\r\nPrize: X=16490, Y=4206\r\n\r\nButton A: X+83, Y+43\r\nButton B: X+55, Y+97\r\nPrize: X=9426, Y=6596\r\n\r\nButton A: X+14, Y+43\r\nButton B: X+20, Y+11\r\nPrize: X=9268, Y=16426\r\n\r\nButton A: X+76, Y+24\r\nButton B: X+37, Y+98\r\nPrize: X=2006, Y=4604\r\n\r\nButton A: X+63, Y+78\r\nButton B: X+49, Y+16\r\nPrize: X=5712, Y=3588\r\n\r\nButton A: X+59, Y+13\r\nButton B: X+43, Y+43\r\nPrize: X=7668, Y=4908\r\n\r\nButton A: X+50, Y+15\r\nButton B: X+31, Y+54\r\nPrize: X=11845, Y=4550\r\n\r\nButton A: X+18, Y+60\r\nButton B: X+67, Y+31\r\nPrize: X=1030, Y=5800\r\n\r\nButton A: X+13, Y+67\r\nButton B: X+52, Y+14\r\nPrize: X=8310, Y=6360\r\n\r\nButton A: X+22, Y+99\r\nButton B: X+40, Y+27\r\nPrize: X=5070, Y=8892\r\n\r\nButton A: X+82, Y+48\r\nButton B: X+14, Y+41\r\nPrize: X=13302, Y=1468\r\n\r\nButton A: X+59, Y+20\r\nButton B: X+13, Y+28\r\nPrize: X=11713, Y=11164\r\n\r\nButton A: X+44, Y+17\r\nButton B: X+21, Y+45\r\nPrize: X=19051, Y=1345\r\n\r\nButton A: X+29, Y+46\r\nButton B: X+41, Y+12\r\nPrize: X=2664, Y=16794\r\n\r\nButton A: X+11, Y+88\r\nButton B: X+85, Y+30\r\nPrize: X=3809, Y=9672\r\n\r\nButton A: X+15, Y+65\r\nButton B: X+77, Y+29\r\nPrize: X=2350, Y=4090\r\n\r\nButton A: X+40, Y+23\r\nButton B: X+18, Y+37\r\nPrize: X=1748, Y=7833\r\n\r\nButton A: X+77, Y+45\r\nButton B: X+14, Y+37\r\nPrize: X=16594, Y=7835\r\n\r\nButton A: X+79, Y+19\r\nButton B: X+34, Y+89\r\nPrize: X=5520, Y=2055\r\n\r\nButton A: X+17, Y+38\r\nButton B: X+74, Y+51\r\nPrize: X=10003, Y=8167\r\n\r\nButton A: X+11, Y+38\r\nButton B: X+48, Y+12\r\nPrize: X=11879, Y=13058\r\n\r\nButton A: X+92, Y+11\r\nButton B: X+67, Y+53\r\nPrize: X=8641, Y=1708\r\n\r\nButton A: X+12, Y+40\r\nButton B: X+61, Y+33\r\nPrize: X=17814, Y=2806\r\n\r\nButton A: X+81, Y+13\r\nButton B: X+13, Y+60\r\nPrize: X=6107, Y=13017\r\n\r\nButton A: X+55, Y+26\r\nButton B: X+19, Y+32\r\nPrize: X=19498, Y=13758\r\n\r\nButton A: X+86, Y+12\r\nButton B: X+23, Y+43\r\nPrize: X=4245, Y=1985\r\n\r\nButton A: X+12, Y+46\r\nButton B: X+75, Y+12\r\nPrize: X=11804, Y=7922\r\n\r\nButton A: X+15, Y+49\r\nButton B: X+42, Y+24\r\nPrize: X=16187, Y=13179\r\n\r\nButton A: X+23, Y+53\r\nButton B: X+56, Y+30\r\nPrize: X=9137, Y=4149\r\n\r\nButton A: X+60, Y+18\r\nButton B: X+30, Y+71\r\nPrize: X=13100, Y=3902\r\n\r\nButton A: X+86, Y+46\r\nButton B: X+11, Y+48\r\nPrize: X=5083, Y=12988\r\n\r\nButton A: X+32, Y+64\r\nButton B: X+46, Y+15\r\nPrize: X=8222, Y=3287\r\n\r\nButton A: X+81, Y+33\r\nButton B: X+54, Y+98\r\nPrize: X=7614, Y=5838\r\n\r\nButton A: X+48, Y+29\r\nButton B: X+13, Y+39\r\nPrize: X=9514, Y=972\r\n\r\nButton A: X+19, Y+81\r\nButton B: X+72, Y+51\r\nPrize: X=4588, Y=6762\r\n\r\nButton A: X+37, Y+16\r\nButton B: X+17, Y+36\r\nPrize: X=11124, Y=15692\r\n\r\nButton A: X+24, Y+73\r\nButton B: X+97, Y+40\r\nPrize: X=6593, Y=3476\r\n\r\nButton A: X+17, Y+28\r\nButton B: X+56, Y+29\r\nPrize: X=10318, Y=12337\r\n\r\nButton A: X+44, Y+37\r\nButton B: X+19, Y+53\r\nPrize: X=891, Y=1971\r\n\r\nButton A: X+35, Y+89\r\nButton B: X+91, Y+57\r\nPrize: X=2639, Y=4269\r\n\r\nButton A: X+15, Y+72\r\nButton B: X+58, Y+17\r\nPrize: X=8803, Y=14919\r\n\r\nButton A: X+36, Y+53\r\nButton B: X+37, Y+13\r\nPrize: X=6655, Y=3303\r\n\r\nButton A: X+56, Y+34\r\nButton B: X+22, Y+49\r\nPrize: X=12614, Y=18039\r\n\r\nButton A: X+89, Y+95\r\nButton B: X+95, Y+22\r\nPrize: X=2605, Y=2463\r\n\r\nButton A: X+16, Y+73\r\nButton B: X+75, Y+73\r\nPrize: X=7660, Y=12337\r\n\r\nButton A: X+85, Y+26\r\nButton B: X+65, Y+89\r\nPrize: X=10630, Y=9403\r\n\r\nButton A: X+28, Y+86\r\nButton B: X+20, Y+15\r\nPrize: X=3620, Y=8890\r\n\r\nButton A: X+56, Y+19\r\nButton B: X+36, Y+74\r\nPrize: X=13276, Y=12044\r\n\r\nButton A: X+29, Y+55\r\nButton B: X+40, Y+13\r\nPrize: X=5024, Y=4185\r\n\r\nButton A: X+30, Y+91\r\nButton B: X+85, Y+26\r\nPrize: X=5250, Y=8970\r\n\r\nButton A: X+60, Y+45\r\nButton B: X+32, Y+83\r\nPrize: X=4276, Y=6334\r\n\r\nButton A: X+60, Y+22\r\nButton B: X+23, Y+54\r\nPrize: X=7926, Y=3710\r\n\r\nButton A: X+76, Y+12\r\nButton B: X+12, Y+52\r\nPrize: X=18788, Y=14052\r\n\r\nButton A: X+29, Y+12\r\nButton B: X+22, Y+52\r\nPrize: X=5032, Y=4096\r\n\r\nButton A: X+12, Y+41\r\nButton B: X+30, Y+12\r\nPrize: X=9494, Y=11342\r\n\r\nButton A: X+14, Y+55\r\nButton B: X+74, Y+16\r\nPrize: X=14450, Y=15167\r\n\r\nButton A: X+37, Y+65\r\nButton B: X+56, Y+28\r\nPrize: X=5073, Y=13165\r\n\r\nButton A: X+56, Y+43\r\nButton B: X+22, Y+88\r\nPrize: X=1676, Y=1998\r\n\r\nButton A: X+40, Y+70\r\nButton B: X+51, Y+19\r\nPrize: X=672, Y=4288\r\n\r\nButton A: X+38, Y+57\r\nButton B: X+31, Y+11\r\nPrize: X=5526, Y=5094\r\n\r\nButton A: X+74, Y+19\r\nButton B: X+15, Y+51\r\nPrize: X=6548, Y=3190\r\n\r\nButton A: X+22, Y+46\r\nButton B: X+31, Y+16\r\nPrize: X=11879, Y=4424\r\n\r\nButton A: X+90, Y+20\r\nButton B: X+23, Y+36\r\nPrize: X=5397, Y=2404\r\n\r\nButton A: X+36, Y+79\r\nButton B: X+95, Y+12\r\nPrize: X=8090, Y=4000\r\n\r\nButton A: X+57, Y+14\r\nButton B: X+19, Y+61\r\nPrize: X=1944, Y=14244\r\n\r\nButton A: X+65, Y+14\r\nButton B: X+31, Y+83\r\nPrize: X=1937, Y=16611\r\n\r\nButton A: X+16, Y+44\r\nButton B: X+43, Y+28\r\nPrize: X=4971, Y=6360\r\n\r\nButton A: X+11, Y+72\r\nButton B: X+86, Y+97\r\nPrize: X=5217, Y=6659\r\n\r\nButton A: X+24, Y+44\r\nButton B: X+46, Y+19\r\nPrize: X=10556, Y=14790\r\n\r\nButton A: X+71, Y+85\r\nButton B: X+44, Y+11\r\nPrize: X=4081, Y=1760\r\n\r\nButton A: X+11, Y+44\r\nButton B: X+78, Y+46\r\nPrize: X=14445, Y=18736\r\n\r\nButton A: X+91, Y+48\r\nButton B: X+30, Y+67\r\nPrize: X=5574, Y=4066\r\n\r\nButton A: X+23, Y+49\r\nButton B: X+54, Y+25\r\nPrize: X=9611, Y=6047\r\n\r\nButton A: X+88, Y+33\r\nButton B: X+50, Y+90\r\nPrize: X=7884, Y=5664\r\n\r\nButton A: X+15, Y+61\r\nButton B: X+72, Y+16\r\nPrize: X=6827, Y=10097\r\n\r\nButton A: X+18, Y+16\r\nButton B: X+21, Y+72\r\nPrize: X=1989, Y=3528\r\n\r\nButton A: X+66, Y+30\r\nButton B: X+12, Y+26\r\nPrize: X=10148, Y=7988\r\n\r\nButton A: X+26, Y+67\r\nButton B: X+65, Y+13\r\nPrize: X=4475, Y=4436\r\n\r\nButton A: X+78, Y+38\r\nButton B: X+58, Y+90\r\nPrize: X=6644, Y=6324\r\n\r\nButton A: X+24, Y+12\r\nButton B: X+24, Y+43\r\nPrize: X=14288, Y=1017\r\n\r\nButton A: X+11, Y+40\r\nButton B: X+67, Y+21\r\nPrize: X=14990, Y=2264\r\n\r\nButton A: X+61, Y+14\r\nButton B: X+11, Y+45\r\nPrize: X=4429, Y=12066\r\n\r\nButton A: X+84, Y+98\r\nButton B: X+16, Y+88\r\nPrize: X=9188, Y=16682\r\n\r\nButton A: X+18, Y+57\r\nButton B: X+76, Y+29\r\nPrize: X=1140, Y=19360\r\n\r\nButton A: X+11, Y+35\r\nButton B: X+47, Y+13\r\nPrize: X=6934, Y=19244\r\n\r\nButton A: X+18, Y+37\r\nButton B: X+88, Y+43\r\nPrize: X=5412, Y=4506\r\n\r\nButton A: X+37, Y+14\r\nButton B: X+26, Y+69\r\nPrize: X=18035, Y=18988\r\n\r\nButton A: X+18, Y+77\r\nButton B: X+94, Y+36\r\nPrize: X=3680, Y=5125\r\n\r\nButton A: X+66, Y+24\r\nButton B: X+23, Y+54\r\nPrize: X=4197, Y=3306\r\n\r\nButton A: X+62, Y+26\r\nButton B: X+27, Y+62\r\nPrize: X=3449, Y=2916\r\n\r\nButton A: X+85, Y+73\r\nButton B: X+70, Y+12\r\nPrize: X=5620, Y=2950\r\n\r\nButton A: X+96, Y+59\r\nButton B: X+29, Y+59\r\nPrize: X=10447, Y=8850\r\n\r\nButton A: X+23, Y+11\r\nButton B: X+13, Y+27\r\nPrize: X=16099, Y=2429\r\n\r\nButton A: X+16, Y+74\r\nButton B: X+30, Y+13\r\nPrize: X=2742, Y=6017\r\n\r\nButton A: X+19, Y+48\r\nButton B: X+35, Y+17\r\nPrize: X=5143, Y=19210\r\n\r\nButton A: X+14, Y+65\r\nButton B: X+43, Y+16\r\nPrize: X=11184, Y=5109\r\n\r\nButton A: X+66, Y+24\r\nButton B: X+24, Y+68\r\nPrize: X=12068, Y=12320\r\n\r\nButton A: X+86, Y+11\r\nButton B: X+13, Y+87\r\nPrize: X=2909, Y=5086\r\n\r\nButton A: X+28, Y+54\r\nButton B: X+38, Y+21\r\nPrize: X=15326, Y=4685\r\n\r\nButton A: X+90, Y+41\r\nButton B: X+19, Y+86\r\nPrize: X=5873, Y=8631\r\n\r\nButton A: X+26, Y+15\r\nButton B: X+18, Y+50\r\nPrize: X=16498, Y=15585\r\n\r\nButton A: X+26, Y+62\r\nButton B: X+46, Y+22\r\nPrize: X=16464, Y=19188\r\n\r\nButton A: X+80, Y+30\r\nButton B: X+69, Y+96\r\nPrize: X=4291, Y=4344\r\n\r\nButton A: X+53, Y+15\r\nButton B: X+16, Y+58\r\nPrize: X=1465, Y=4425\r\n\r\nButton A: X+11, Y+22\r\nButton B: X+55, Y+18\r\nPrize: X=15544, Y=6332\r\n\r\nButton A: X+26, Y+74\r\nButton B: X+72, Y+25\r\nPrize: X=7572, Y=10088\r\n\r\nButton A: X+11, Y+48\r\nButton B: X+52, Y+26\r\nPrize: X=12503, Y=1044\r\n\r\nButton A: X+35, Y+57\r\nButton B: X+88, Y+23\r\nPrize: X=9481, Y=3770\r\n\r\nButton A: X+22, Y+62\r\nButton B: X+97, Y+63\r\nPrize: X=7253, Y=9291\r\n\r\nButton A: X+11, Y+53\r\nButton B: X+44, Y+13\r\nPrize: X=4565, Y=4483\r\n\r\nButton A: X+36, Y+12\r\nButton B: X+22, Y+58\r\nPrize: X=18656, Y=8528\r\n\r\nButton A: X+48, Y+90\r\nButton B: X+71, Y+17\r\nPrize: X=11094, Y=10350\r\n\r\nButton A: X+95, Y+99\r\nButton B: X+65, Y+14\r\nPrize: X=13680, Y=10172\r\n\r\nButton A: X+20, Y+99\r\nButton B: X+65, Y+54\r\nPrize: X=1790, Y=4041\r\n\r\nButton A: X+76, Y+23\r\nButton B: X+11, Y+38\r\nPrize: X=1899, Y=14197\r\n\r\nButton A: X+34, Y+72\r\nButton B: X+72, Y+30\r\nPrize: X=7384, Y=6084\r\n\r\nButton A: X+74, Y+18\r\nButton B: X+13, Y+74\r\nPrize: X=3317, Y=16128\r\n\r\nButton A: X+85, Y+47\r\nButton B: X+11, Y+50\r\nPrize: X=13636, Y=9893\r\n\r\nButton A: X+13, Y+25\r\nButton B: X+42, Y+18\r\nPrize: X=604, Y=17884\r\n\r\nButton A: X+94, Y+64\r\nButton B: X+14, Y+86\r\nPrize: X=3832, Y=8650\r\n\r\nButton A: X+88, Y+19\r\nButton B: X+29, Y+70\r\nPrize: X=4698, Y=5731\r\n\r\nButton A: X+59, Y+15\r\nButton B: X+18, Y+59\r\nPrize: X=7140, Y=10039\r\n\r\nButton A: X+67, Y+12\r\nButton B: X+15, Y+71\r\nPrize: X=19205, Y=18916\r\n\r\nButton A: X+33, Y+17\r\nButton B: X+41, Y+94\r\nPrize: X=2469, Y=3021\r\n\r\nButton A: X+22, Y+70\r\nButton B: X+62, Y+11\r\nPrize: X=18330, Y=16422\r\n\r\nButton A: X+68, Y+21\r\nButton B: X+15, Y+64\r\nPrize: X=19117, Y=8318\r\n\r\nButton A: X+12, Y+75\r\nButton B: X+85, Y+81\r\nPrize: X=917, Y=3480\r\n\r\nButton A: X+89, Y+14\r\nButton B: X+66, Y+96\r\nPrize: X=10202, Y=5372\r\n\r\nButton A: X+25, Y+63\r\nButton B: X+29, Y+11\r\nPrize: X=6651, Y=9357\r\n\r\nButton A: X+83, Y+48\r\nButton B: X+17, Y+76\r\nPrize: X=6142, Y=9044\r\n\r\nButton A: X+49, Y+12\r\nButton B: X+19, Y+78\r\nPrize: X=1932, Y=8870\r\n\r\nButton A: X+41, Y+13\r\nButton B: X+40, Y+58\r\nPrize: X=4784, Y=3964\r\n\r\nButton A: X+63, Y+25\r\nButton B: X+48, Y+99\r\nPrize: X=6918, Y=9861\r\n\r\nButton A: X+44, Y+18\r\nButton B: X+28, Y+67\r\nPrize: X=13260, Y=9568\r\n\r\nButton A: X+45, Y+25\r\nButton B: X+16, Y+51\r\nPrize: X=4854, Y=6234\r\n\r\nButton A: X+36, Y+54\r\nButton B: X+86, Y+34\r\nPrize: X=1672, Y=1178\r\n\r\nButton A: X+37, Y+33\r\nButton B: X+21, Y+75\r\nPrize: X=3031, Y=5967\r\n\r\nButton A: X+65, Y+22\r\nButton B: X+70, Y+98\r\nPrize: X=3585, Y=3294\r\n\r\nButton A: X+57, Y+24\r\nButton B: X+18, Y+58\r\nPrize: X=10142, Y=7706\r\n\r\nButton A: X+99, Y+17\r\nButton B: X+25, Y+78\r\nPrize: X=7511, Y=4754\r\n\r\nButton A: X+56, Y+20\r\nButton B: X+12, Y+29\r\nPrize: X=8284, Y=2281\r\n\r\nButton A: X+25, Y+12\r\nButton B: X+17, Y+35\r\nPrize: X=17070, Y=9295\r\n\r\nButton A: X+16, Y+58\r\nButton B: X+47, Y+18\r\nPrize: X=4210, Y=1676\r\n\r\nButton A: X+24, Y+53\r\nButton B: X+88, Y+55\r\nPrize: X=10184, Y=9671\r\n\r\nButton A: X+14, Y+57\r\nButton B: X+66, Y+47\r\nPrize: X=5096, Y=6780\r\n\r\nButton A: X+91, Y+18\r\nButton B: X+32, Y+47\r\nPrize: X=10866, Y=6013\r\n\r\nButton A: X+44, Y+79\r\nButton B: X+47, Y+24\r\nPrize: X=4800, Y=7652\r\n\r\nButton A: X+12, Y+33\r\nButton B: X+29, Y+19\r\nPrize: X=3304, Y=17190\r\n\r\nButton A: X+97, Y+97\r\nButton B: X+21, Y+91\r\nPrize: X=4567, Y=4917\r\n\r\nButton A: X+25, Y+80\r\nButton B: X+96, Y+51\r\nPrize: X=8194, Y=9824\r\n\r\nButton A: X+77, Y+18\r\nButton B: X+25, Y+38\r\nPrize: X=4063, Y=1818\r\n\r\nButton A: X+25, Y+89\r\nButton B: X+82, Y+26\r\nPrize: X=3630, Y=8934\r\n\r\nButton A: X+13, Y+32\r\nButton B: X+76, Y+55\r\nPrize: X=1866, Y=17800\r\n\r\nButton A: X+49, Y+14\r\nButton B: X+32, Y+58\r\nPrize: X=9528, Y=11206\r\n\r\nButton A: X+23, Y+54\r\nButton B: X+59, Y+32\r\nPrize: X=5446, Y=5958\r\n\r\nButton A: X+16, Y+97\r\nButton B: X+82, Y+59\r\nPrize: X=5482, Y=6509\r\n\r\nButton A: X+76, Y+11\r\nButton B: X+68, Y+91\r\nPrize: X=704, Y=670\r\n\r\nButton A: X+63, Y+37\r\nButton B: X+18, Y+39\r\nPrize: X=19241, Y=10872\r\n\r\nButton A: X+17, Y+50\r\nButton B: X+45, Y+11\r\nPrize: X=13734, Y=16737\r\n\r\nButton A: X+44, Y+20\r\nButton B: X+29, Y+66\r\nPrize: X=12504, Y=16028\r\n\r\nButton A: X+26, Y+66\r\nButton B: X+88, Y+42\r\nPrize: X=9394, Y=8610\r\n\r\nButton A: X+88, Y+34\r\nButton B: X+45, Y+91\r\nPrize: X=10505, Y=9727\r\n\r\nButton A: X+19, Y+73\r\nButton B: X+85, Y+83\r\nPrize: X=5408, Y=8112\r\n\r\nButton A: X+66, Y+20\r\nButton B: X+24, Y+78\r\nPrize: X=3510, Y=6934\r\n\r\nButton A: X+95, Y+18\r\nButton B: X+20, Y+57\r\nPrize: X=4560, Y=1875\r\n\r\nButton A: X+29, Y+28\r\nButton B: X+16, Y+60\r\nPrize: X=3939, Y=7100\r\n\r\nButton A: X+43, Y+90\r\nButton B: X+74, Y+45\r\nPrize: X=2994, Y=2970\r\n\r\nButton A: X+29, Y+76\r\nButton B: X+59, Y+19\r\nPrize: X=6326, Y=17315\r\n\r\nButton A: X+12, Y+22\r\nButton B: X+50, Y+13\r\nPrize: X=10488, Y=18428\r\n\r\nButton A: X+68, Y+12\r\nButton B: X+22, Y+80\r\nPrize: X=17244, Y=7404\r\n\r\nButton A: X+71, Y+25\r\nButton B: X+15, Y+69\r\nPrize: X=1116, Y=3324\r\n\r\nButton A: X+94, Y+88\r\nButton B: X+21, Y+82\r\nPrize: X=6023, Y=9566\r\n\r\nButton A: X+12, Y+49\r\nButton B: X+55, Y+28\r\nPrize: X=9161, Y=4148\r\n\r\nButton A: X+73, Y+34\r\nButton B: X+27, Y+84\r\nPrize: X=7610, Y=10544\r\n\r\nButton A: X+89, Y+14\r\nButton B: X+53, Y+84\r\nPrize: X=10027, Y=7252\r\n\r\nButton A: X+60, Y+17\r\nButton B: X+29, Y+77\r\nPrize: X=11588, Y=10010\r\n\r\nButton A: X+70, Y+19\r\nButton B: X+42, Y+47\r\nPrize: X=5110, Y=4769\r\n\r\nButton A: X+73, Y+12\r\nButton B: X+18, Y+74\r\nPrize: X=18979, Y=508\r\n\r\nButton A: X+28, Y+89\r\nButton B: X+55, Y+37\r\nPrize: X=3557, Y=3726\r\n\r\nButton A: X+20, Y+71\r\nButton B: X+74, Y+15\r\nPrize: X=240, Y=1764\r\n\r\nButton A: X+11, Y+15\r\nButton B: X+84, Y+19\r\nPrize: X=4235, Y=1571\r\n\r\nButton A: X+15, Y+82\r\nButton B: X+91, Y+44\r\nPrize: X=6849, Y=6152\r\n\r\nButton A: X+25, Y+14\r\nButton B: X+21, Y+81\r\nPrize: X=2958, Y=8442\r\n\r\nButton A: X+13, Y+56\r\nButton B: X+81, Y+26\r\nPrize: X=5732, Y=6608\r\n\r\nButton A: X+84, Y+11\r\nButton B: X+45, Y+77\r\nPrize: X=1968, Y=1111\r\n\r\nButton A: X+79, Y+17\r\nButton B: X+40, Y+99\r\nPrize: X=4393, Y=2482\r\n\r\nButton A: X+16, Y+57\r\nButton B: X+94, Y+74\r\nPrize: X=9600, Y=11243\r\n\r\nButton A: X+36, Y+28\r\nButton B: X+86, Y+11\r\nPrize: X=6190, Y=2523\r\n\r\nButton A: X+96, Y+22\r\nButton B: X+24, Y+89\r\nPrize: X=9216, Y=4784\r\n\r\nButton A: X+57, Y+23\r\nButton B: X+19, Y+60\r\nPrize: X=19120, Y=4428\r\n\r\nButton A: X+17, Y+87\r\nButton B: X+41, Y+46\r\nPrize: X=1957, Y=2807\r\n\r\nButton A: X+29, Y+19\r\nButton B: X+33, Y+95\r\nPrize: X=3414, Y=4218\r\n\r\nButton A: X+51, Y+20\r\nButton B: X+58, Y+85\r\nPrize: X=8149, Y=7180\r\n\r\nButton A: X+40, Y+14\r\nButton B: X+19, Y+36\r\nPrize: X=3540, Y=3000\r\n\r\nButton A: X+56, Y+53\r\nButton B: X+92, Y+17\r\nPrize: X=9864, Y=3870\r\n\r\nButton A: X+55, Y+89\r\nButton B: X+50, Y+16\r\nPrize: X=8175, Y=7257\r\n\r\nButton A: X+56, Y+30\r\nButton B: X+41, Y+90\r\nPrize: X=3087, Y=5940\r\n\r\nButton A: X+56, Y+14\r\nButton B: X+17, Y+44\r\nPrize: X=9023, Y=15770\r\n\r\nButton A: X+47, Y+14\r\nButton B: X+13, Y+37\r\nPrize: X=13845, Y=3384\r\n\r\nButton A: X+33, Y+12\r\nButton B: X+20, Y+32\r\nPrize: X=17882, Y=19448\r\n\r\nButton A: X+39, Y+80\r\nButton B: X+47, Y+14\r\nPrize: X=2467, Y=4154\r\n\r\nButton A: X+57, Y+38\r\nButton B: X+20, Y+41\r\nPrize: X=3381, Y=8345\r\n\r\nButton A: X+51, Y+14\r\nButton B: X+17, Y+79\r\nPrize: X=5304, Y=8592\r\n\r\nButton A: X+54, Y+24\r\nButton B: X+24, Y+48\r\nPrize: X=2462, Y=16568\r\n\r\nButton A: X+11, Y+37\r\nButton B: X+43, Y+39\r\nPrize: X=561, Y=725\r\n\r\nButton A: X+48, Y+23\r\nButton B: X+19, Y+40\r\nPrize: X=3232, Y=15593\r\n\r\nButton A: X+86, Y+39\r\nButton B: X+12, Y+55\r\nPrize: X=2146, Y=17900\r\n\r\nButton A: X+14, Y+43\r\nButton B: X+23, Y+20\r\nPrize: X=2192, Y=2276\r\n"; 
        public const string test_input_2 = test_input_1;
        public const string input_2 = input_1;

        public static long Part_1(string input)
        {
            string[] lines = input.Split("\r\n\r\n", StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries);
            long[] x = new long[lines.Length];
            long[] y = new long[lines.Length];
            long[] xa = new long[lines.Length];
            long[] ya = new long[lines.Length];
            long[] xb = new long[lines.Length];
            long[] yb = new long[lines.Length];
            long[] na = new long[lines.Length];
            long[] nb = new long[lines.Length];
            long sum = 0;
            for (int i = 0; i < lines.Length; i++)
            {
                x[i] = long.Parse(Regex.Match(lines[i], @"X=(\d+)").Groups[1].Value);
                y[i] = long.Parse(Regex.Match(lines[i], @"Y=(\d+)").Groups[1].Value);
                xa[i] = long.Parse(Regex.Match(lines[i], @"Button A: X\+(\d+)").Groups[1].Value);
                ya[i] = long.Parse(Regex.Match(lines[i], @"Button A: X\+\d+, Y\+(\d+)").Groups[1].Value);
                xb[i] = long.Parse(Regex.Match(lines[i], @"Button B: X\+(\d+)").Groups[1].Value);
                yb[i] = long.Parse(Regex.Match(lines[i], @"Button B: X\+\d+, Y\+(\d+)").Groups[1].Value);
                long numerator = x[i] * ya[i] - y[i] * xa[i];
                long denumerator = xb[i] * ya[i] - yb[i] * xa[i];
                if (numerator % denumerator != 0) { na[i] = -1; nb[i] = -1; continue; }
                nb[i] = numerator / denumerator;
                numerator = x[i] - nb[i] * xb[i];
                denumerator = xa[i];
                if (numerator % denumerator != 0) { na[i] = -1; nb[i] = -1; continue; }
                na[i] = numerator / denumerator;
                sum += na[i] * 3 + nb[i];
            }
            return sum;
        }

        public static long Part_2(string input)
        {
            string[] lines = input.Split("\r\n\r\n", StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries);
            long[] x = new long[lines.Length];
            long[] y = new long[lines.Length];
            long[] xa = new long[lines.Length];
            long[] ya = new long[lines.Length];
            long[] xb = new long[lines.Length];
            long[] yb = new long[lines.Length];
            long[] na = new long[lines.Length];
            long[] nb = new long[lines.Length];
            long sum = 0;
            for (int i = 0; i < lines.Length; i++)
            {
                x[i] = long.Parse(Regex.Match(lines[i], @"X=(\d+)").Groups[1].Value) + 10000000000000;
                y[i] = long.Parse(Regex.Match(lines[i], @"Y=(\d+)").Groups[1].Value) + 10000000000000;
                xa[i] = long.Parse(Regex.Match(lines[i], @"Button A: X\+(\d+)").Groups[1].Value);
                ya[i] = long.Parse(Regex.Match(lines[i], @"Button A: X\+\d+, Y\+(\d+)").Groups[1].Value);
                xb[i] = long.Parse(Regex.Match(lines[i], @"Button B: X\+(\d+)").Groups[1].Value);
                yb[i] = long.Parse(Regex.Match(lines[i], @"Button B: X\+\d+, Y\+(\d+)").Groups[1].Value);
                long numerator = x[i] * ya[i] - y[i] * xa[i];
                long denumerator = xb[i] * ya[i] - yb[i] * xa[i];
                if (numerator % denumerator != 0) { na[i] = -1; nb[i] = -1; continue; }
                nb[i] = numerator / denumerator;
                numerator = x[i] - nb[i] * xb[i];
                denumerator = xa[i];
                if (numerator % denumerator != 0) { na[i] = -1; nb[i] = -1; continue; }
                na[i] = numerator / denumerator;
                sum += na[i] * 3 + nb[i];
            }
            return sum;
        }

        
    }
}
